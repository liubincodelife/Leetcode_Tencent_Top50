# [Leetcode122.买卖股票的最佳时机II](<https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/>)

- 方法分析

  这道题目介绍两种解法：

  - 暴力解法。两重循环，并递归求解所有买卖股票情况的最大利润。此方法耗时较长，时间复杂度为$O(n^n)$。

  - **使用峰谷法(推荐)**。只需要一次循环。定义两个变量分别代表最小价格和最大利润，由题意可知第二次购买前必须先将之前购买的股票卖出才能继续购买股票。所以最大利润问题为按照波谷购买并在紧跟波谷的下一个波峰卖出的原则购买股票即可得到最大利润。先找到第一个股票价格的波谷时刻购买股票，然后循环查找下一个波峰时刻，波峰时刻的价格减去波谷时刻的价格即为此次购买股票的最大利润，并继续查找接下来的波峰波谷组合，求得最终的最大利润。

- 复杂度分析

  - 时间复杂度

    由于整个过程需要遍历一遍数组全部元素，所以时间复杂度为$O(n)$。

  - 空间复杂度

    整个过程除了传入的数组$prices$外没有分配额外的内存，所以空间复杂度为$O(1)$。
