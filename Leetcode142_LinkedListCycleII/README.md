# [Leetcode142.环形链表II](<https://leetcode-cn.com/problems/linked-list-cycle-ii/>)

- 方法分析

  根据题目意思，不允许修改原链表，而且空间复杂度最好为$O(1)$

  有两种方法可求得链表环的入口节点：

  - 容器法

    首先定义一个容器变量，比如set，在遍历链表的时候判断当前节点是否在容器中，若不存在，则将当前节点添加到容器中；若存在则证明当前节点即为链表环的入口节点，直接返回即可。

  - **双指针法(推荐)**

    - 先证明链表是否有环

      首先定义两个指针，一个快指针，一个慢指针。快指针一次向后移动2步，慢指针一次向后移动1步，若在若干步之后两个指针相遇，则证明此链表有环。

    - 再找出环的入口节点位置

      假设从head到环的入口节点需要移动$\space a$步，环的长度为$\space b$，则如果环存在，当快慢指针相遇时，慢指针走过的长度假设为$\space a+x$，此时快指针至少走完一圈环了，假设快慢指针相遇时走完了$\space m$圈($\space m\geq1$)。此时快指针走的路径长度为：$\space a+mb+x$；慢指针走过的路径长度为：$\space a+x$。

      又由于快指针走过的路径长度始终是慢指针走过路径长度的2倍，所以$a+mb+x=2(a+x) \rightarrow a=mb-x$。

      此时让慢指针从新从head节点向后移动$a$步到环入口节点，则快指针移动的路径长度为：$a+mb+x+a=a+2mb$，由此可见，此时快指针也恰好处于环入口节点处。

- 复杂度分析

  - 时间复杂度

    容器法和双指针法的时间复杂度均为$O(n)$。

  - 空间复杂度

    容器法需要定义一个保存链表所有节点的容器，故空间复杂度为$O(n)$。

    双指针法只需要使用快慢指针两个节点，故空间复杂度为$O(1)​$。
